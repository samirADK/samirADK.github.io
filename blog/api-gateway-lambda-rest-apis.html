<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://img.icons8.com/ios-filled/50/000000/infinity.png" type="image/png">
    <title>Building Production-Ready REST APIs with API Gateway and Lambda - Samir Adhikari</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NQYZ1YTN96"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NQYZ1YTN96');
</script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Outfit:wght@300;400;500;600;700&family=Montserrat:wght@300;400;500;600;700&display=swap');

        /* Light Theme Variables */
        :root {
            --bg-primary: #f8f8f8;
            --bg-secondary: #ffffff;
            --bg-accent: #f0f0f0;
            --text-primary: #222222;
            --text-secondary: #555555;
            --accent-color: #6e56cf;
            --accent-hover: #8a6eff;
            --accent-muted: rgba(110, 86, 207, 0.2);
            --gradient-1: linear-gradient(135deg, #6e56cf 0%, #b86eff 100%);
            --gradient-2: linear-gradient(135deg, #f0f0f0 0%, #ffffff 100%);
            --shadow-sm: 0 5px 15px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 10px 30px rgba(0, 0, 0, 0.2);
            --shadow-glow: 0 0 15px rgba(110, 86, 207, 0.2);
            --card-border: 1px solid #e0e0e0;
            --neon-glow: 0 0 10px rgba(110, 86, 207, 0.3), 0 0 20px rgba(110, 86, 207, 0.1);
            --header-bg: rgba(255, 255, 255, 0.9);
            --switch-bg: #e0e0e0;
            --switch-thumb: #ffffff;
            --switch-icon-color: #6e56cf;
            --footer-divider: #e0e0e0;
            --scrollbar-track: #f0f0f0;
            --scrollbar-thumb: #cccccc;
        }

        /* Dark Theme Variables */
        :root[data-theme="dark"] {
            --bg-primary: #0f0f0f;
            --bg-secondary: #161616;
            --bg-accent: #1e1e1e;
            --text-primary: #f8f8f8;
            --text-secondary: #bebebe;
            --accent-color: #6e56cf;
            --accent-hover: #8a6eff;
            --accent-muted: rgba(110, 86, 207, 0.3);
            --gradient-1: linear-gradient(135deg, #6e56cf 0%, #b86eff 100%);
            --gradient-2: linear-gradient(135deg, #1e1e1e 0%, #3b3b3b 100%);
            --shadow-sm: 0 5px 15px rgba(0, 0, 0, 0.2);
            --shadow-md: 0 10px 30px rgba(0, 0, 0, 0.4);
            --shadow-glow: 0 0 15px rgba(110, 86, 207, 0.4);
            --card-border: 1px solid #2a2a2a;
            --neon-glow: 0 0 10px rgba(110, 86, 207, 0.5), 0 0 20px rgba(110, 86, 207, 0.3);
            --header-bg: rgba(15, 15, 15, 0.9);
            --switch-bg: #333333;
            --switch-thumb: #6e56cf;
            --switch-icon-color: #ffffff;
            --footer-divider: #2a2a2a;
            --scrollbar-track: #161616;
            --scrollbar-thumb: #333333;
        }

        /* General Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.7;
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        h1, h2, h3, h4, h5 {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background-color: var(--header-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 0 20px;
            border-bottom: var(--card-border);
            transition: background-color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            transition: color 0.5s ease;
        }

        .logo::before {
            content: "";
            display: inline-block;
            width: 12px;
            height: 12px;
            margin-right: 10px;
            background-color: var(--accent-color);
            border-radius: 50%;
            box-shadow: var(--shadow-glow);
            transition: background-color 0.5s ease, box-shadow 0.5s ease;
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 40px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 16px;
            transition: all 0.3s;
            position: relative;
        }

        .nav-links a::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent-color);
            transition: width 0.3s;
        }

        .nav-links a:hover {
            color: var(--accent-color);
            text-shadow: var(--neon-glow);
        }

        .nav-links a:hover::after {
            width: 100%;
            box-shadow: var(--shadow-glow);
        }

        /* Theme Switch (Copied from Landing Page) */
        .theme-switch-wrapper {
            display: flex;
            align-items: center;
            margin-left: 30px;
            position: relative;
        }

        .theme-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 32px;
        }

        .theme-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--switch-bg);
            transition: .4s;
            border-radius: 34px;
            overflow: hidden;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 4px;
            bottom: 4px;
            background-color: var(--switch-thumb);
            transition: .4s;
            border-radius: 50%;
            z-index: 2;
        }

        /* Switch icons */
        .slider .switch-icon {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1;
            color: var(--switch-icon-color);
            transition: opacity 0.3s, transform 0.5s;
        }

        .slider .sun-icon {
            right: 9px;
            opacity: 1;
        }

        .slider .moon-icon {
            left: 7px;
            opacity: 0;
        }

        input:checked + .slider .sun-icon {
            opacity: 0;
        }

        input:checked + .slider .moon-icon {
            opacity: 1;
        }

        input:checked + .slider {
            background-color: var(--accent-color);
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--accent-color);
        }

        input:checked + .slider:before {
            transform: translateX(28px);
            background-color: var(--accent-color);
        }

        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            margin-left: 20px;
        }

        .mobile-menu-btn span {
            height: 2px;
            width: 100%;
            background-color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .mobile-menu {
            position: fixed;
            top: 80px;
            left: 0;
            width: 100%;
            height: 0;
            background-color: var(--bg-secondary);
            overflow: hidden;
            transition: height 0.3s ease;
            z-index: 99;
            opacity: 0;
            box-shadow: var(--shadow-md);
        }

        .mobile-menu.active {
            height: auto;
            opacity: 1;
            box-shadow: var(--shadow-md);
            border-bottom: var(--card-border);
        }

        .mobile-menu ul {
            list-style: none;
            padding: 20px;
        }

        .mobile-menu li {
            margin: 15px 0;
        }

        .mobile-menu a {
            font-size: 18px;
            color: var(--text-primary);
            text-decoration: none;
            transition: color 0.3s;
            display: block;
            padding: 10px 0;
        }

        .mobile-menu a:hover {
            color: var(--accent-color);
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: flex;
            }
        }

        /* Blog Post Styles */
        .blog-post {
            padding: 80px 0;
        }

        .blog-post-title {
            font-size: 42px;
            margin-bottom: 30px;
            text-align: center;
            color: var(--text-primary);
            transition: color 0.5s ease;
        }

        .blog-post-meta {
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 40px;
            transition: color 0.5s ease;
        }

        .blog-post-meta span {
            margin: 0 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .blog-post-meta i {
            color: var(--accent-color);
        }

        .blog-post-image {
            max-width: 800px;
            margin: 0 auto 40px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .blog-post-image img {
            width: 100%;
            display: block;
        }

        .blog-post-content {
            max-width: 800px;
            margin: 0 auto;
            font-size: 18px;
            line-height: 1.8;
            color: var(--text-primary);
            transition: color 0.5s ease;
        }

        .blog-post-content h2 {
            font-size: 32px;
            margin: 40px 0 20px;
        }

        .blog-post-content h3 {
            font-size: 26px;
            margin: 30px 0 15px;
        }

        .blog-post-content p {
            margin-bottom: 25px;
        }

        .blog-post-content ul,
        .blog-post-content ol {
            padding-left: 30px;
            margin-bottom: 25px;
        }

        .blog-post-content li {
            margin-bottom: 10px;
        }

        .blog-post-content a {
            color: var(--accent-color);
            text-decoration: none;
            transition: color 0.3s;
        }

        .blog-post-content a:hover {
            color: var(--accent-hover);
        }

        .blog-post-content blockquote {
            border-left: 5px solid var(--accent-color);
            padding: 15px 20px;
            margin: 30px 0;
            background-color: var(--bg-accent);
            border-radius: 5px;
            font-style: italic;
            color: var(--text-secondary);
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        .blog-post-content pre {
            background-color: var(--bg-accent);
            color: var(--text-primary);
            padding: 15px;
            overflow-x: auto;
            border-radius: 8px;
            margin-bottom: 20px;
            white-space: pre-wrap;
            word-break: break-all;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        .blog-post-content code {
            font-family: monospace, monospace;
            font-size: 16px;
            display: block;
        }

        .blog-post-content pre code {
            background: none;
            padding: 0;
            font-size: 16px;
            color: var(--text-primary);
            display: block;
        }

        .blog-post-content p code {
            background-color: var(--bg-accent);
            padding: 3px 6px;
            border-radius: 4px;
            font-family: monospace, monospace;
            font-size: 14px;
            color: var(--text-primary);
            transition: background-color 0.5s ease, color 0.5s ease;
            display: inline;
        }

        .highlight {
            background: linear-gradient(120deg, var(--accent-muted) 0%, var(--accent-muted) 100%);
            padding: 25px;
            border-left: 4px solid var(--accent-color);
            margin: 30px 0;
            border-radius: 0 8px 8px 0;
            transition: background 0.5s ease;
        }

        /* Footer */
        footer {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            padding: 80px 0 40px;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 50px;
        }

        .footer-logo {
            flex: 0 0 30%;
        }

        .footer-logo h3 {
            font-size: 28px;
            margin-bottom: 20px;
            color: var(--text-primary);
            transition: color 0.5s ease;
        }

        .footer-logo p {
            color: var(--text-secondary);
            margin-bottom: 25px;
            font-size: 15px;
            transition: color 0.5s ease;
        }

        .footer-links {
            flex: 0 0 20%;
        }

        .footer-links h4 {
            font-size: 20px;
            margin-bottom: 25px;
            position: relative;
            padding-bottom: 12px;
            color: var(--text-primary);
            transition: color 0.5s ease;
        }

        .footer-links h4::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background-color: var(--accent-color);
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: var(--accent-color);
        }

        .footer-divider {
            height: 1px;
            background-color: var(--footer-divider);
            margin: 20px 0;
            transition: background-color 0.5s ease;
        }

        .footer-bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .copyright {
            color: var(--text-secondary);
            font-size: 14px;
            transition: color 0.5s ease;
        }

        .footer-social {
            display: flex;
            gap: 15px;
        }

        .footer-social a {
            width: 38px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--bg-accent);
            border-radius: 50%;
            border: var(--card-border);
            color: var(--text-secondary);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .footer-social a:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--accent-color);
            border-radius: 50%;
            transform: scale(0);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: -1;
        }

        .footer-social a:hover {
            color: white;
            transform: translateY(-3px);
            box-shadow: var(--shadow-glow);
            border-color: var(--accent-color);
        }

        .footer-social a:hover:before {
            transform: scale(1);
        }

        .footer-social a i {
            position: relative;
            z-index: 2;
        }

        /* Back to top button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--accent-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-md);
            transition: all 0.3s, opacity 0.5s, transform 0.5s;
            z-index: 99;
            opacity: 0;
            transform: translateY(20px);
            text-decoration: none;
        }

        .back-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .back-to-top:hover {
            background-color: var(--accent-hover);
            transform: translateY(-5px) scale(1.05);
            box-shadow: var(--shadow-glow);
        }

        /* Theme transition overlay */
        .theme-transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-primary);
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }
         /* Custom scrollbar */
         ::-webkit-scrollbar {
            width: 12px;
            height: 12px; /* Added height for horizontal scrollbar */
        }

        ::-webkit-scrollbar-track {
            background: var(--scrollbar-track);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--scrollbar-thumb);
            border-radius: 6px;
            border: 3px solid var(--scrollbar-track);
            transition: background-color 0.5s ease;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-color);
        }

          /* Prefers color scheme media query */
        @media (prefers-color-scheme: dark) {
            body:not([data-theme-forced="light"]) {
                --bg-primary: #0f0f0f;
                --bg-secondary: #161616;
                --bg-accent: #1e1e1e;
                --text-primary: #f8f8f8;
                --text-secondary: #bebebe;
                --shadow-glow: 0 0 15px rgba(110, 86, 207, 0.4);
                --card-border: 1px solid #2a2a2a;
                --neon-glow: 0 0 10px rgba(110, 86, 207, 0.5), 0 0 20px rgba(110, 86, 207, 0.3);
                --header-bg: rgba(15, 15, 15, 0.9);
                --switch-bg: #333333;
                --switch-thumb: #6e56cf;
                --switch-icon-color: #ffffff;
                --footer-divider: #2a2a2a;
                --scrollbar-track: #161616;
                --scrollbar-thumb: #333333;
            }
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .footer-content {
                flex-wrap: wrap;
                gap: 40px;
            }

            .footer-logo {
                flex: 0 0 100%;
                margin-bottom: 20px;
            }

            .footer-links {
                flex: 0 0 calc(50% - 20px);
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .mobile-menu-btn {
                display: flex;
            }
            
            .mobile-menu {
                border-top: 1px solid var(--card-border);
            }
            
            .blog-post-title {
                font-size: 36px;
            }

            .blog-post-content {
                font-size: 16px;
            }

            .blog-post-content h2 {
                font-size: 28px;
            }

            .blog-post-content h3 {
                font-size: 22px;
            }

            .footer-bottom {
                flex-direction: column;
                gap: 20px;
            }
        }
    </style>
</head>
<body data-theme="light">

    <!-- Theme transition overlay -->
    <div class="theme-transition-overlay" id="themeOverlay"></div>

    <!-- Header -->
    <header>
        <div class="container">
            <nav>
                <a href="/" class="logo">Samir Adhikari</a>
                <ul class="nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/blog.html">Blog</a></li>
                </ul>
                <!-- Mobile Menu Button -->
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </nav>
        </div>
    </header>

     <!-- Mobile Menu -->
     <div class="mobile-menu" id="mobileMenu">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/blog.html">Blog</a></li>
        </ul>
    </div>

    <!-- Blog Post Section -->
    <section class="blog-post">
        <div class="container">
            <h1 class="blog-post-title">Building Production-Ready REST APIs with API Gateway and Lambda</h1>
            <div class="blog-post-meta">
                <span><i class="far fa-calendar-alt"></i> July 15, 2025</span>
                <span><i class="far fa-user"></i> Samir Adhikari</span>
                <span><i class="far fa-clock"></i> 12 min read</span>
                <span><i class="fas fa-tags"></i> Serverless, API Gateway, Lambda</span>
            </div>

            <div class="blog-post-content">
                <p>Building scalable REST APIs has never been easier with AWS's serverless architecture. In this comprehensive guide, we'll explore how to create production-ready APIs using Amazon API Gateway and AWS Lambda, covering everything from basic setup to advanced security and performance optimizations.</p>

                <h2>Why Choose Serverless for REST APIs?</h2>

                <p>Serverless APIs offer several compelling advantages:</p>
                <ul>
                    <li><strong>Cost Efficiency:</strong> Pay only for actual requests, not idle server time</li>
                    <li><strong>Auto-scaling:</strong> Handle traffic spikes without manual intervention</li>
                    <li><strong>No Server Management:</strong> Focus on business logic, not infrastructure</li>
                    <li><strong>High Availability:</strong> Built-in redundancy across multiple AZs</li>
                    <li><strong>Fast Development:</strong> Quick deployment and iteration cycles</li>
                </ul>

                <h2>Architecture Overview</h2>

                <p>Our serverless API architecture consists of:</p>
                <ul>
                    <li><strong>API Gateway:</strong> Entry point for all requests with built-in features like throttling, caching, and authentication</li>
                    <li><strong>Lambda Functions:</strong> Business logic execution in multiple runtime environments</li>
                    <li><strong>DynamoDB:</strong> Serverless database for data persistence</li>
                    <li><strong>IAM:</strong> Fine-grained access control</li>
                    <li><strong>CloudWatch:</strong> Monitoring and logging</li>
                </ul>

                <h2>Setting Up Your First Serverless API</h2>

                <h3>1. Create the Lambda Function</h3>

                <p>Let's start by creating a Lambda function that will handle our API requests:</p>

                <pre><code >import json
import boto3
import uuid
from datetime import datetime
from decimal import Decimal

# Initialize DynamoDB client
dynamodb = boto3.resource('dynamodb')
table = dynamodb.Table('Users')

def lambda_handler(event, context):
    """
    Main Lambda handler for user API endpoints
    """
    http_method = event['httpMethod']
    path = event['path']
    
    try:
        if http_method == 'GET' and path == '/users':
            return get_users(event)
        elif http_method == 'GET' and path.startswith('/users/'):
            return get_user(event)
        elif http_method == 'POST' and path == '/users':
            return create_user(event)
        elif http_method == 'PUT' and path.startswith('/users/'):
            return update_user(event)
        elif http_method == 'DELETE' and path.startswith('/users/'):
            return delete_user(event)
        else:
            return create_response(404, {'error': 'Not Found'})
            
    except Exception as e:
        print(f"Error: {str(e)}")
        return create_response(500, {'error': 'Internal Server Error'})

def get_users(event):
    """Get all users with pagination"""
    try:
        # Extract query parameters
        query_params = event.get('queryStringParameters') or {}
        limit = int(query_params.get('limit', 20))
        last_key = query_params.get('lastKey')
        
        scan_kwargs = {'Limit': limit}
        if last_key:
            scan_kwargs['ExclusiveStartKey'] = {'userId': last_key}
            
        response = table.scan(**scan_kwargs)
        
        result = {
            'users': response['Items'],
            'count': response['Count']
        }
        
        if 'LastEvaluatedKey' in response:
            result['lastKey'] = response['LastEvaluatedKey']['userId']
            
        return create_response(200, result)
        
    except Exception as e:
        return create_response(400, {'error': str(e)})

def create_user(event):
    """Create a new user"""
    try:
        body = json.loads(event['body'])
        
        # Validate required fields
        required_fields = ['name', 'email']
        for field in required_fields:
            if field not in body:
                return create_response(400, {'error': f'{field} is required'})
        
        user_id = str(uuid.uuid4())
        timestamp = datetime.now().isoformat()
        
        user = {
            'userId': user_id,
            'name': body['name'],
            'email': body['email'],
            'createdAt': timestamp,
            'updatedAt': timestamp
        }
        
        # Add optional fields
        if 'phone' in body:
            user['phone'] = body['phone']
            
        table.put_item(Item=user)
        
        return create_response(201, user)
        
    except json.JSONDecodeError:
        return create_response(400, {'error': 'Invalid JSON'})
    except Exception as e:
        return create_response(400, {'error': str(e)})

def create_response(status_code, body):
    """Create standardized HTTP response"""
    return {
        'statusCode': status_code,
        'headers': {
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*',
            'Access-Control-Allow-Headers': 'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token',
            'Access-Control-Allow-Methods': 'GET,POST,PUT,DELETE,OPTIONS'
        },
        'body': json.dumps(body, default=decimal_default)
    }

def decimal_default(obj):
    """Handle Decimal objects in JSON serialization"""
    if isinstance(obj, Decimal):
        return float(obj)
    raise TypeError
</code></pre>

                <h3>2. Create DynamoDB Table</h3>

                <p>Set up a DynamoDB table to store our data:</p>

                <pre><code >aws dynamodb create-table \
    --table-name Users \
    --attribute-definitions \
        AttributeName=userId,AttributeType=S \
    --key-schema \
        AttributeName=userId,KeyType=HASH \
    --billing-mode PAY_PER_REQUEST \
    --tags Key=Environment,Value=Production Key=Project,Value=UserAPI
</code></pre>

                <h3>3. Configure API Gateway</h3>

                <p>Create an API Gateway REST API using AWS SAM template:</p>

                <pre><code >AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31

Description: 'Serverless User API with API Gateway and Lambda'

Globals:
  Function:
    Timeout: 30
    Runtime: python3.9
    Environment:
      Variables:
        TABLE_NAME: !Ref UsersTable

Resources:
  # API Gateway
  UserApi:
    Type: AWS::Serverless::Api
    Properties:
      StageName: prod
      Cors:
        AllowMethods: "'GET,POST,PUT,DELETE,OPTIONS'"
        AllowHeaders: "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'"
        AllowOrigin: "'*'"
      ThrottleConfig:
        RateLimit: 1000
        BurstLimit: 2000
      Auth:
        DefaultAuthorizer: AWS_IAM
        ApiKeyRequired: true
      RequestValidators:
        all:
          ValidateRequestBody: true
          ValidateRequestParameters: true
      Models:
        UserModel:
          type: object
          required:
            - name
            - email
          properties:
            name:
              type: string
              minLength: 1
            email:
              type: string
              format: email

  # Lambda Function
  UserFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: src/
      Handler: app.lambda_handler
      Policies:
        - DynamoDBCrudPolicy:
            TableName: !Ref UsersTable
      Events:
        GetUsers:
          Type: Api
          Properties:
            RestApiId: !Ref UserApi
            Path: /users
            Method: get
        CreateUser:
          Type: Api
          Properties:
            RestApiId: !Ref UserApi
            Path: /users
            Method: post
            RequestModel:
              Model: UserModel
              Required: true
        GetUser:
          Type: Api
          Properties:
            RestApiId: !Ref UserApi
            Path: /users/{userId}
            Method: get
        UpdateUser:
          Type: Api
          Properties:
            RestApiId: !Ref UserApi
            Path: /users/{userId}
            Method: put
        DeleteUser:
          Type: Api
          Properties:
            RestApiId: !Ref UserApi
            Path: /users/{userId}
            Method: delete

  # DynamoDB Table
  UsersTable:
    Type: AWS::DynamoDB::Table
    Properties:
      TableName: Users
      AttributeDefinitions:
        - AttributeName: userId
          AttributeType: S
      KeySchema:
        - AttributeName: userId
          KeyType: HASH
      BillingMode: PAY_PER_REQUEST
      PointInTimeRecoverySpecification:
        PointInTimeRecoveryEnabled: true

Outputs:
  UserApiUrl:
    Description: "API Gateway endpoint URL"
    Value: !Sub "https://${UserApi}.execute-api.${AWS::Region}.amazonaws.com/prod"
  UserApiId:
    Description: "API Gateway ID"
    Value: !Ref UserApi
</code></pre>

                <h2>Advanced Security Implementation</h2>

                <h3>API Key and Rate Limiting</h3>

                <p>Implement API keys for client identification and rate limiting:</p>

                <pre><code >  # API Usage Plan
  ApiUsagePlan:
    Type: AWS::ApiGateway::UsagePlan
    Properties:
      UsagePlanName: UserAPIBasicPlan
      Description: Basic usage plan for User API
      ApiStages:
        - ApiId: !Ref UserApi
          Stage: prod
      Throttle:
        RateLimit: 1000
        BurstLimit: 2000
      Quota:
        Limit: 100000
        Period: MONTH

  # API Key
  ApiKey:
    Type: AWS::ApiGateway::ApiKey
    Properties:
      Name: UserAPIKey
      Description: API Key for User API
      Enabled: true

  # Link API Key to Usage Plan
  ApiUsagePlanKey:
    Type: AWS::ApiGateway::UsagePlanKey
    Properties:
      KeyId: !Ref ApiKey
      KeyType: API_KEY
      UsagePlanId: !Ref ApiUsagePlan
</code></pre>

                <h3>JWT Token Validation</h3>

                <p>Add JWT token validation for enhanced security:</p>

                <pre><code >import jwt
import json
from functools import wraps

def validate_jwt_token(token, secret_key):
    """Validate JWT token"""
    try:
        payload = jwt.decode(token, secret_key, algorithms=['HS256'])
        return payload
    except jwt.ExpiredSignatureError:
        return None
    except jwt.InvalidTokenError:
        return None

def require_auth(f):
    """Decorator to require authentication"""
    @wraps(f)
    def decorated_function(event, context):
        auth_header = event.get('headers', {}).get('Authorization')
        
        if not auth_header or not auth_header.startswith('Bearer '):
            return create_response(401, {'error': 'Missing or invalid authorization header'})
        
        token = auth_header.split(' ')[1]
        payload = validate_jwt_token(token, SECRET_KEY)
        
        if not payload:
            return create_response(401, {'error': 'Invalid or expired token'})
        
        # Add user info to event
        event['user'] = payload
        return f(event, context)
    
    return decorated_function

# Apply decorator to protected endpoints
@require_auth
def create_user(event):
    # Implementation here
    pass
</code></pre>

                <h2>Performance Optimization Strategies</h2>

                <div class="highlight">
                    <h3>Key Performance Tips:</h3>
                    <ul>
                        <li><strong>Connection Pooling:</strong> Reuse database connections across invocations</li>
                        <li><strong>Provisioned Concurrency:</strong> Reduce cold starts for critical endpoints</li>
                        <li><strong>Memory Allocation:</strong> Right-size Lambda memory for optimal price/performance</li>
                        <li><strong>API Gateway Caching:</strong> Cache frequent GET requests</li>
                        <li><strong>DynamoDB Best Practices:</strong> Use efficient query patterns and indexes</li>
                    </ul>
                </div>

                <h3>Lambda Performance Optimization</h3>

                <pre><code ># Connection pooling for DynamoDB
import boto3
from botocore.config import Config

# Configure with connection pooling
config = Config(
    max_pool_connections=50,
    retries={'max_attempts': 3}
)

dynamodb = boto3.resource('dynamodb', config=config)

# Provisioned concurrency configuration in SAM
Resources:
  UserFunction:
    Type: AWS::Serverless::Function
    Properties:
      # ... other properties
      ProvisionedConcurrencyConfig:
        ProvisionedConcurrencyEnabled: true
        ProvisionedConcurrencyCount: 5
      Environment:
        Variables:
          _LAMBDA_TELEMETRY_LOG_LEVEL: "WARN"  # Reduce logging overhead
</code></pre>

                <h2>Monitoring and Observability</h2>

                <h3>CloudWatch Alarms</h3>

                <pre><code >  # CloudWatch Alarms
  HighErrorRateAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      AlarmName: UserAPI-HighErrorRate
      AlarmDescription: High error rate for User API
      MetricName: 4XXError
      Namespace: AWS/ApiGateway
      Statistic: Sum
      Period: 300
      EvaluationPeriods: 2
      Threshold: 10
      ComparisonOperator: GreaterThanThreshold
      Dimensions:
        - Name: ApiName
          Value: !Ref UserApi

  HighLatencyAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      AlarmName: UserAPI-HighLatency
      AlarmDescription: High latency for User API
      MetricName: Latency
      Namespace: AWS/ApiGateway
      Statistic: Average
      Period: 300
      EvaluationPeriods: 2
      Threshold: 5000
      ComparisonOperator: GreaterThanThreshold
</code></pre>

                <h3>X-Ray Tracing</h3>

                <p>Enable AWS X-Ray for distributed tracing:</p>

                <pre><code >from aws_xray_sdk.core import xray_recorder
from aws_xray_sdk.core import patch_all

# Patch AWS SDK calls
patch_all()

@xray_recorder.capture('lambda_handler')
def lambda_handler(event, context):
    # Your handler code
    pass

@xray_recorder.capture('database_operation')
def get_user_from_db(user_id):
    # Database operation
    pass
</code></pre>

                <h2>Deployment and CI/CD</h2>

                <h3>Automated Deployment Pipeline</h3>

                <pre><code ># buildspec.yml for CodeBuild
version: 0.2

phases:
  install:
    runtime-versions:
      python: 3.9
    commands:
      - pip install aws-sam-cli
  pre_build:
    commands:
      - echo Build started on `date`
      - echo Testing Lambda function
      - cd src && python -m pytest tests/
  build:
    commands:
      - echo Build started on `date`
      - sam build
      - sam package --s3-bucket $BUCKET_NAME --output-template-file packaged-template.yaml
  post_build:
    commands:
      - echo Build completed on `date`
      - sam deploy --template-file packaged-template.yaml --stack-name user-api-stack --capabilities CAPABILITY_IAM --parameter-overrides Environment=$ENVIRONMENT

artifacts:
  files:
    - packaged-template.yaml
</code></pre>

                <h2>Cost Optimization Best Practices</h2>

                <ul>
                    <li><strong>Right-size Lambda memory:</strong> Use AWS Lambda Power Tuning to find optimal settings</li>
                    <li><strong>Implement caching:</strong> Cache responses at API Gateway level for frequently accessed data</li>
                    <li><strong>Use DynamoDB On-Demand:</strong> Pay for what you use instead of provisioned capacity</li>
                    <li><strong>Monitor and alert:</strong> Set up billing alarms and cost monitoring</li>
                    <li><strong>Optimize cold starts:</strong> Use provisioned concurrency only where needed</li>
                </ul>

                <h2>Conclusion</h2>

                <p>Building production-ready REST APIs with API Gateway and Lambda provides a scalable, cost-effective solution for modern applications. By implementing proper security measures, performance optimizations, and monitoring, you can create APIs that handle millions of requests while maintaining low latency and high availability.</p>

                <p>The serverless approach eliminates infrastructure management overhead, allowing you to focus on delivering business value. With the patterns and best practices covered in this guide, you're equipped to build robust serverless APIs that scale seamlessly with your application's growth.</p>

                <div class="highlight">
                    <p><strong>Next Steps:</strong> Try implementing these patterns in your own projects, and consider extending the API with additional features like WebSocket support using API Gateway v2, or implementing GraphQL endpoints for more flexible data fetching.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h3>Samir Adhikari</h3>
                    <p>A blog dedicated to sharing AWS insights, DevOps practices, and cloud solution strategies.</p>
                </div>
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/blog.html">Blog</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h4>Categories</h4>
                    <ul>
                        <li><a href="#">AWS</a></li>
                        <li><a href="#">DevOps</a></li>
                        <li><a href="#">Cloud Solutions</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h4>Contact</h4>
                    <ul>
                        <li><a href="mailto:samir.adhh@email.com">samir.adhhh@gmail.com</a></li>
                        <li><a href="#">9861762422</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-divider"></div>
            <div class="footer-bottom">
                <div class="copyright">Â© 2025 Samir Adhikari. All rights reserved.</div>                <div class="footer-social">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>                </div>
                </div>
        </div>
    </footer>

    <!-- Back to top button -->
    <a href="#" class="back-to-top" id="backToTopBtn">
        <i class="fas fa-arrow-up"></i>
    </a>

    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Theme Toggle ---
            const checkbox = document.getElementById('checkbox');
            const themeOverlay = document.getElementById('themeOverlay');

            function showThemeTransition() {
                if (themeOverlay) {
                    themeOverlay.style.display = 'block';
                    themeOverlay.style.opacity = '1';
                    setTimeout(() => {
                        themeOverlay.style.opacity = '0';
                        setTimeout(() => {
                            themeOverlay.style.display = 'none';
                        }, 500);
                    }, 500);
                }
            }

            function setTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
            }

            if (checkbox) {
                checkbox.addEventListener('change', () => {
                    const theme = checkbox.checked ? 'dark' : 'light';
                    showThemeTransition();
                    setTheme(theme);
                });
            }

            const storedTheme = localStorage.getItem('theme');
            if (storedTheme) {
                setTheme(storedTheme);
                if (checkbox) checkbox.checked = storedTheme === 'dark';
            } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                setTheme('dark');
                if (checkbox) checkbox.checked = true;
            }

             // --- Back to Top Button ---
             const backToTopBtn = document.getElementById('backToTopBtn');
            if (backToTopBtn) {
                window.addEventListener('scroll', () => {
                    backToTopBtn.classList.toggle('visible', window.pageYOffset > 300);
                });

                backToTopBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }

            // --- Mobile Menu ---
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');

            if (mobileMenuBtn && mobileMenu) {
                mobileMenuBtn.addEventListener('click', () => {
                    mobileMenu.classList.toggle('active');
                });
            }
        });
    </script>
</body>
</html>